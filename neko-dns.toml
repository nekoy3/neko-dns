# neko-dns è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

[listen]
address = "0.0.0.0"
port = 53

# Upstream DNSã‚µãƒ¼ãƒãƒ¼ï¼ˆå…¨éƒ¨ã«åŒæ™‚ã«ã‚¯ã‚¨ãƒªã‚’æŠ•ã’ã¦æœ€é€Ÿã‚’æ¡ç”¨ï¼‰
[[upstreams]]
name = "google-primary"
address = "8.8.8.8"
port = 53
timeout_ms = 2000

[[upstreams]]
name = "google-secondary"
address = "8.8.4.4"
port = 53
timeout_ms = 2000

[[upstreams]]
name = "cloudflare"
address = "1.1.1.1"
port = 53
timeout_ms = 2000

[[upstreams]]
name = "quad9"
address = "9.9.9.9"
port = 53
timeout_ms = 2000

[cache]
max_entries = 100000
serve_stale = true        # TTLåˆ‡ã‚Œã§ã‚‚staleå¿œç­”ã‚’è¿”ã™ (RFC 8767)
stale_ttl_secs = 86400    # staleå¿œç­”ã®æœ€å¤§ä¿æŒæ™‚é–“

[ttl_alchemy]
enabled = true
min_ttl = 30
max_ttl = 86400
frequency_weight = 0.3    # ã‚¯ã‚¨ãƒªé »åº¦ãŒTTLå»¶é•·ã«å½±éŸ¿ã™ã‚‹åº¦åˆã„
volatility_weight = 0.5   # å¿œç­”å¤‰å‹•ãŒTTLçŸ­ç¸®ã«å½±éŸ¿ã™ã‚‹åº¦åˆã„

[prefetch]
enabled = true
threshold_ratio = 0.1     # TTLæ®‹ã‚Š10%ã§å…ˆå›ã‚Šãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
learn_patterns = false    # æ™‚é–“å¸¯ãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’ï¼ˆå°†æ¥æ©Ÿèƒ½ï¼‰
check_interval_secs = 10

[trust]
enabled = true
min_score = 0.5           # ã“ã®å€¤ä»¥ä¸‹ã®upstreamã¯è‡ªå‹•ç„¡åŠ¹åŒ–
recalc_interval_secs = 60

[chaos]
enabled = false            # ã‚«ã‚ªã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼ˆæœ‰åŠ¹ã«ã™ã‚‹ã¨éšœå®³æ³¨å…¥ï¼‰
servfail_probability = 0.01  # 1%ã®ç¢ºç‡ã§SERVFAIL
exclude_domains = [        # ã‚«ã‚ªã‚¹ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³
    "example.com",
]

[journal]
enabled = true
max_entries = 1000000
retention_hours = 168      # 7æ—¥é–“ä¿æŒ

[negative]
enabled = true
speculative = false        # typoæ¨æ¸¬ãƒã‚¬ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå®Ÿé¨“çš„ï¼‰
default_ttl = 300

[edns]
enabled = true
custom_option_code = 65001 # Private Use range

[web]
enabled = true
address = "0.0.0.0"
port = 8053

# ğŸ± ãƒã‚³ã®ã²ã¨ã“ã¨ï¼ˆADDITIONALã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«TXTãƒ¬ã‚³ãƒ¼ãƒ‰ã§ã²ã¨ã“ã¨æ·»ãˆã‚‹ï¼‰
[neko_comment]
enabled = true

# ğŸŒ² å†å¸°è§£æ±ºï¼ˆãƒ«ãƒ¼ãƒˆãƒ’ãƒ³ãƒˆã‹ã‚‰ã®åå¾©è§£æ±º + ãƒ‘ãƒ©ãƒ¬ãƒ«DFSæ¢ç´¢ï¼‰
[recursive]
enabled = true                # true: å†å¸°è§£æ±º, false: upstreamè»¢é€
root_hints_path = "root.hints"
max_depth = 20                # æœ€å¤§å†å¸°æ·±åº¦
parallel_branches = 3         # åŒæ™‚æ¢ç´¢ã™ã‚‹NSãƒ–ãƒ©ãƒ³ãƒæ•°
query_timeout_ms = 2000       # å„ã‚¯ã‚¨ãƒªã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
curiosity_walk = true         # ğŸ± å¥½å¥‡å¿ƒæ•£æ­©ã‚’æœ‰åŠ¹åŒ–
journey_txt = true            # ğŸ—ºï¸ è§£æ±ºã®æ—…è·¯TXTãƒ¬ã‚³ãƒ¼ãƒ‰è¿½åŠ 
glue_ttl_secs = 3600          # glueã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®TTL
